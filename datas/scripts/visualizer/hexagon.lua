--pdn's music visuallizer
--made by pdnghiaqoi - marseio
-- inspired from super hexagon ( you should check it out )
script.Parent = workspace
Part = Instance.new("Part")
Part.Parent = script
Part.Name = "D"
Part.CFrame = CFrame.new(-1.45643198, 6.93217897, -12.1461744, 0, -1, 0, 1, 0, -0, 0, 0, 1)
Part.Orientation = Vector3.new(0, 0, 90)
Part.Position = Vector3.new(-1.45643198, 6.93217897, -12.1461744)
Part.Rotation = Vector3.new(0, 0, 90)
Part.Color = Color3.new(0, 1, 1)
Part.Size = Vector3.new(2.00000191, 0.0500000007, 0.0500000007)
Part.Anchored = true
Part.BottomSurface = Enum.SurfaceType.Smooth
Part.BrickColor = BrickColor.new("Toothpaste")
Part.CanCollide = false
Part.Locked = true
Part.Material = Enum.Material.Neon
Part.TopSurface = Enum.SurfaceType.Smooth
Part.brickColor = BrickColor.new("Toothpaste")
Part0 = Instance.new("Part")
Part0.Parent = script
	Part1 = Instance.new("Part")
		Part1.Parent = script
	Part2 = Instance.new("Part")
		Part2.Parent = script

	Part3 = Instance.new("Part")
		Part3.Parent = script

	Part4 = Instance.new("Part")	
	Part4.Parent = script
	Part5 = Instance.new("Part")
	Part5.Parent = script
Part0.Anchored = true
Part1.Anchored = true
Part2.Anchored = true
Part3.Anchored = true
Part4.Anchored = true
Part5.Anchored = true
	Part0.CFrame = CFrame.new(14.4039917, 3.46854877, -1.67090595, -4.37113883e-08, -1, 0, 1, -4.37113883e-08, 0, 0, 0, 1)
	Part0.Orientation = Vector3.new(0, 0, 90)
	Part0.Position = Vector3.new(14.4039917, 3.46854877, -1.67090595)
	Part0.Rotation = Vector3.new(0, 0, 90)
	Part0.Color = Color3.new(0, 1, 1)
	Part0.Size = Vector3.new(0.0910975859, 0.091097571, 2.00414658)
	Part0.BottomSurface = Enum.SurfaceType.Smooth
	Part0.BrickColor = BrickColor.new("Toothpaste")
	Part0.Material = Enum.Material.Neon
	Part0.TopSurface = Enum.SurfaceType.Smooth
	Part0.brickColor = BrickColor.new("Toothpaste")
	Part0.Anchored = true
	Part1.Anchored = true
	Part1.CFrame = CFrame.new(14.4039917, 2.62590718, -0.211396456, 2.18557048e-08, -1, -3.78551732e-08, -0.500000238, -4.37113883e-08, 0.866025388, -0.866025388, 0, -0.500000238)
	Part1.Orientation = Vector3.new(-60, -180, -90)
	Part1.Position = Vector3.new(14.4039917, 2.62590718, -0.211396456)
	Part1.Rotation = Vector3.new(-120, 0, 90)
	Part1.Color = Color3.new(0, 1, 1)
	Part1.Size = Vector3.new(0.0910975859, 0.091097571, 2.00414658)
	Part1.BottomSurface = Enum.SurfaceType.Smooth
	Part1.BrickColor = BrickColor.new("Toothpaste")
	Part1.Material = Enum.Material.Neon
	Part1.TopSurface = Enum.SurfaceType.Smooth
	Part1.brickColor = BrickColor.new("Toothpaste")
	Part2.CFrame = CFrame.new(14.4039917, 0.940582454, -0.211396456, -2.18557048e-08, -1, -3.78551732e-08, 0.500000238, -4.37113883e-08, 0.866025388, -0.866025388, 0, 0.500000238)
	Part2.Orientation = Vector3.new(-60, 0, 90)
	Part2.Position = Vector3.new(14.4039917, 0.940582454, -0.211396456)
	Part2.Rotation = Vector3.new(-60, 0, 90)
	Part2.Color = Color3.new(0, 1, 1)
	Part2.Size = Vector3.new(0.0910975859, 0.091097571, 2.00414658)
	Part2.BottomSurface = Enum.SurfaceType.Smooth
	Part2.BrickColor = BrickColor.new("Toothpaste")
	Part2.Material = Enum.Material.Neon
	Part2.TopSurface = Enum.SurfaceType.Smooth
	Part2.brickColor = BrickColor.new("Toothpaste")
	Part3.CFrame = CFrame.new(14.4039917, 0.0979548693, -1.67090595, -4.37113883e-08, -1, 0, 1, -4.37113883e-08, 0, 0, 0, 1)
	Part3.Orientation = Vector3.new(0, 0, 90)
	Part3.Position = Vector3.new(14.4039917, 0.0979548693, -1.67090595)
	Part3.Rotation = Vector3.new(0, 0, 90)
	Part3.Color = Color3.new(0, 1, 1)
	Part3.Size = Vector3.new(0.0910975859, 0.091097571, 2.00414658)
	Part3.BottomSurface = Enum.SurfaceType.Smooth
	Part3.BrickColor = BrickColor.new("Toothpaste")
	Part3.Material = Enum.Material.Neon
	Part3.TopSurface = Enum.SurfaceType.Smooth
	Part3.brickColor = BrickColor.new("Toothpaste")
	Part4.CFrame = CFrame.new(14.4039917, 0.940582454, -3.13041544, 2.18557048e-08, -1, -3.78551732e-08, -0.500000238, -4.37113883e-08, 0.866025388, -0.866025388, 0, -0.500000238)
	Part4.Orientation = Vector3.new(-60, -180, -90)
	Part4.Position = Vector3.new(14.4039917, 0.940582454, -3.13041544)
	Part4.Rotation = Vector3.new(-120, 0, 90)
	Part4.Color = Color3.new(0, 1, 1)
	Part4.Size = Vector3.new(0.0910975859, 0.091097571, 2.00414658)
	Part4.BottomSurface = Enum.SurfaceType.Smooth
	Part4.BrickColor = BrickColor.new("Toothpaste")
	Part4.Material = Enum.Material.Neon
	Part4.TopSurface = Enum.SurfaceType.Smooth
	Part4.brickColor = BrickColor.new("Toothpaste")
	Part5.CFrame = CFrame.new(14.4039917, 2.62590718, -3.13041544, -2.18557048e-08, -1, -3.78551732e-08, 0.500000238, -4.37113883e-08, 0.866025388, -0.866025388, 0, 0.500000238)
	Part5.Orientation = Vector3.new(-60, 0, 90)
	Part5.Position = Vector3.new(14.4039917, 2.62590718, -3.13041544)
	Part5.Rotation = Vector3.new(-60, 0, 90)
	Part5.Color = Color3.new(0, 1, 1)
	Part5.Size = Vector3.new(0.0910975859, 0.091097571, 2.00414658)
	Part5.BottomSurface = Enum.SurfaceType.Smooth
	Part5.BrickColor = BrickColor.new("Toothpaste")
	Part5.Material = Enum.Material.Neon
	Part5.TopSurface = Enum.SurfaceType.Smooth
	Part5.brickColor = BrickColor.new("Toothpaste")
	c = {Part1,Part2,Part3,Part4,Part5}
local new = Part0:UnionAsync(c)
new.Locked = true
a1 = Instance.new("Attachment")
a1.Parent = new
a1.Position = Vector3.new(-1.658, -0, -0.987)
a2 = Instance.new("Attachment")
a2.Parent = new
a2.Position = Vector3.new(-1.658, -0, 0.979)
b1 = Instance.new("Attachment")
b1.Parent = new
b1.Position = Vector3.new(1.632, 0, 0.979)
b2 = Instance.new("Attachment")
b2.Parent = new
b2.Position = Vector3.new(1.632, 0, -0.987)
c1 = Instance.new("Attachment")
c1.Parent = new
c1.Position = Vector3.new(0.051, 0, -1.932)
c2 = Instance.new("Attachment")
c2.Parent = new
c2.Position = Vector3.new(1.632, 0, -0.987)
d1 = Instance.new("Attachment")
d1.Parent = new
d1.Position = Vector3.new(1.632, 0, 0.9)
d2 = Instance.new("Attachment")
d2.Parent = new
d2.Position = Vector3.new(0.051, 0, 1.943)
e1 = Instance.new("Attachment")
e1.Parent = new
e1.Position = Vector3.new(0.051, 0, 1.943)
e2 = Instance.new("Attachment")
e2.Parent = new
e2.Position = Vector3.new(-1.644, -0, 0.9)
f1 = Instance.new("Attachment")
f1.Parent = new
f1.Position = Vector3.new(-1.644, 0, -0.972)
f2 = Instance.new("Attachment")
f2.Parent = new
f2.Position = Vector3.new(0.051, 0, -1.927)
local xd = NumberSequence.new({
  NumberSequenceKeypoint.new(0,.5),
	NumberSequenceKeypoint.new(.1,.75),
	NumberSequenceKeypoint.new(.2,.5),
	NumberSequenceKeypoint.new(.3,.25),
	NumberSequenceKeypoint.new(.4,.5),
	NumberSequenceKeypoint.new(.5,.75),
	NumberSequenceKeypoint.new(.6,.5),
	NumberSequenceKeypoint.new(.7,.25),
	NumberSequenceKeypoint.new(.8,.5),
	NumberSequenceKeypoint.new(.9,.75),	
	NumberSequenceKeypoint.new(1,1),
})
Trail0 = Instance.new("Trail")
Trail1 = Instance.new("Trail")
Trail2 = Instance.new("Trail")
Trail3 = Instance.new("Trail")
Trail4 = Instance.new("Trail")
Trail5 = Instance.new("Trail")
Trail0.Transparency = xd
Trail1.Transparency = xd
Trail2.Transparency = xd
Trail3.Transparency = xd
Trail4.Transparency = xd
Trail5.Transparency = xd
Trail0.Name = "Trail1"
Trail0.Parent = new
Trail0.Attachment0 = a1
Trail0.Attachment1 = a2
Trail0.Color = ColorSequence.new(Color3.new(0, 1, 1),Color3.new(0, 1, 1))
Trail0.LightInfluence = 0
Trail1.Name = "Trail2"
Trail1.Parent = new
Trail1.Attachment0 = b1
Trail1.Attachment1 = b2
Trail1.Color = ColorSequence.new(Color3.new(0, 1, 1),Color3.new(0, 1, 1))
Trail1.LightInfluence = 0
Trail2.Name = "Trail3"
Trail2.Parent = new
Trail2.Attachment0 = c1
Trail2.Attachment1 = c2
Trail2.Color = ColorSequence.new(Color3.new(0, 1, 1),Color3.new(0, 1, 1))
Trail2.LightInfluence = 0
Trail3.Name = "Trail4"
Trail3.Parent = new
Trail3.Attachment0 = d1
Trail3.Attachment1 = d2
Trail3.Color = ColorSequence.new(Color3.new(0, 1, 1),Color3.new(0, 1, 1))
Trail3.LightInfluence = 0
Trail4.Name = "Trail5"
Trail4.Parent = new
Trail4.Attachment0 = e1
Trail4.Attachment1 = e2
Trail4.Color = ColorSequence.new(Color3.new(0, 1, 1),Color3.new(0, 1, 1))
Trail4.LightInfluence = 0
Trail5.Name = "Trail6"
Trail5.Parent = new
Trail5.Attachment0 = f1
Trail5.Attachment1 = f2
Trail5.Color = ColorSequence.new(Color3.new(0, 1, 1),Color3.new(0, 1, 1))
Trail5.LightInfluence = 0
	a = new:Clone()
	a.Parent = game:GetService("ReplicatedStorage")
	b = new:Clone()
	b.Parent = game:GetService("ReplicatedStorage")
	c = new:Clone()
	c.Parent = game:GetService("ReplicatedStorage")
	d = Part:Clone()
	d.Parent = game:GetService("ReplicatedStorage")
	e = Part:Clone()
	e.Parent = game:GetService("ReplicatedStorage")
wait(0.5)
Part0:Remove()
Part1:Remove()
Part2:Remove()
Part3:Remove()
Part4:Remove()
Part5:Remove()
Part:Remove()
	local remote = Instance.new("RemoteEvent")
	remote.Name = owner.UserId
	remote.Parent = game:GetService("ReplicatedStorage")
	local setting = {
		id = "rbxassetid://685775229";
		vol = 1
	}
	local sound
	function createsnd()
	sound = Instance.new("Sound")
	sound.Name = owner.Name
	sound.SoundId = setting.id
	sound.Volume = setting.vol
	sound.Looped = true
	sound.Parent = c
	sound:Play()
	end
	createsnd()
	owner.Chatted:Connect(function(msg)
		local mes = msg
		if string.sub(msg, 1,3) == "/e " then
			mes = string.sub(msg,4)
		end
		if string.sub(mes, 1,2) == "/r" then
    sound:Remove()
    createsnd()		
    remote:FireClient(owner, sound)
    elseif string.sub(mes,1,4) == "vol/" then
			print("setted vol")
			if not sound or not sound.Parent == c then createsnd() remote:FireClient(owner, sound) end
			sound.Volume = tonumber(string.sub(mes,5))
			setting.vol = tonumber(string.sub(mes,5))
		elseif string.sub(mes,1,3) == "id/" then
			if not sound or not sound.Parent == c then createsnd() remote:FireClient(owner, sound) end
			sound:Stop()
			wait()
			print("setted id")
			sound.SoundId = "rbxassetid://"..tonumber(string.sub(mes,4))
			setting.id = "rbxassetid://"..tonumber(string.sub(mes,4))
			wait()
			sound:Play()
		end
	end)
cframe = nil
	spawn(function()
	game:GetService("RunService").Heartbeat:connect(function()
	if not a or not b or not c or not d or a.Parent ~= script or b.Parent ~= script or c.Parent ~= script or d.Parent ~= script or e.Parent ~= script then
	a = new:Clone()
	a.Parent = script
	b = new:Clone()
	b.Parent = script
	c = new:Clone()
	c.Parent = script
	d = Part:Clone()
	d.Parent = script
	e = Part:Clone()
	e.Parent = script
  if sound and sound.Parent ~= nil then
            sound.Parent = c
  end
	end
	if not owner.Character or owner.Character == nil or not owner.Character:FindFirstChild("HumanoidRootPart") then wait() end
	    if owner.Character:WaitForChild("HumanoidRootPart") then
	              local Orn = owner.Character.HumanoidRootPart.Orientation
	              local Position = owner.Character.HumanoidRootPart.Position
                cframe = owner.Character.HumanoidRootPart.CFrame          	  
                a.Orientation = Vector3.new(90, Orn.Y, 0)
	              a.Position = Vector3.new(Position.X,Position.Y+7.5,Position.Z)
	              b.Orientation = Vector3.new(90, Orn.Y, 0)
	              b.Position = Vector3.new(Position.X,Position.Y+7.5,Position.Z)
	              c.Orientation = Vector3.new(90, Orn.Y, 0)
	              c.Position = Vector3.new(Position.X,Position.Y+7.5,Position.Z)
	              d.Orientation = Vector3.new(90, Orn.Y, 0)
              d.Position = Vector3.new(Position.X,Position.Y+7.5,Position.Z)
              e.Orientation = Vector3.new(0, Orn.Y, 90)
              e.Position = Vector3.new(Position.X,Position.Y+7.5,Position.Z)
	    end
	end)
	end)
	function tween(part,size)
	local tweeningInformation = TweenInfo.new(0.05,Enum.EasingStyle.Linear,Enum.EasingDirection.Out)
	local partProperties = {
    Size = Vector3.new(size,0.1,size);
	}
	local Tween = game:GetService("TweenService"):Create(part,tweeningInformation,partProperties)
    Tween:Play()
end
remote:FireClient(owner, sound) 
NLS([==[
	local player = game:GetService("Players").LocalPlayer
	local sound
	local remote = game:GetService("ReplicatedStorage"):WaitForChild(player.UserId)
  remote.OnClientEvent:Connect(function(snd)
  sound = snd
  end)
game:GetService("RunService").Heartbeat:Connect(function()	
  if not remote then remote = game:GetService("ReplicatedStorage"):WaitForChild(player.UserId) end
	    if not sound then wait() end
	    if sound.Playing == true then
		remote:FireServer(sound.PlaybackLoudness)
	end
end)
]==],owner.PlayerGui)
local min = 100
local max = 975
remote.OnServerEvent:Connect(function(plr, sound)
		local bass = sound / min
		tween(a,bass)
		d.Size = Vector3.new(bass, 0.1, 0.1)
		local loud = (sound / max) * 5
		tween(b,loud)
		e.Size = Vector3.new(loud, 0.1, 0.1)
end)